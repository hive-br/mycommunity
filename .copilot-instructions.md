# GitHub Copilot Instructions for HiveBR Social Media Platform

## Project Overview
This is a Next.js 14 social media platform built on the Hive blockchain, similar to Twitter/X but with decentralized content storage. The app supports multiple themes, blockchain authentication, content posting, voting, and community features.

## Core Technologies & Stack
- **Framework**: Next.js 14 (App Router)
- **Package Manager**: pnpm (NOT npm or yarn - always use pnpm commands)
- **UI Library**: Chakra UI with custom themes
- **Styling**: Tailwind CSS + Chakra UI
- **Blockchain**: Hive blockchain integration
- **Authentication**: Aioha (Hive keychain, ledger, peak vault, hive auth)
- **State Management**: React Context + hooks
- **Content**: Markdown rendering, image uploads, GIF support
- **Language**: TypeScript

## Architecture & File Structure

### Core Directories
- `/app/` - Next.js App Router pages and layouts
- `/components/` - Reusable UI components organized by feature
- `/lib/hive/` - Blockchain integration and Hive client functions
- `/hooks/` - Custom React hooks for state management
- `/themes/` - Chakra UI theme configurations
- `/contexts/` - React context providers
- `/types/` - TypeScript type definitions

### Key Components Structure
```
components/
├── blog/ - Blog and post-related components
├── homepage/ - Main feed components (tweets, composer, etc.)
├── layout/ - App layout components (header, sidebar, footer)
├── notifications/ - Notification system
├── profile/ - User profile components
└── wallet/ - Wallet and transaction components
```

## Important Patterns & Conventions

### 1. Theme System
- Multiple themes available: `hacker`, `forest`, `bluesky`, `nounish`, `windows95`, `hiveBR`, `cannabis`
- Theme selection via environment variable `NEXT_PUBLIC_THEME`
- All themes follow consistent color tokens: `primary`, `secondary`, `accent`, `background`, `text`, `muted`, `border`
- Use semantic color names, not hardcoded colors

### 2. Blockchain Integration
- Use `useAioha()` hook for user authentication and blockchain operations
- All content operations (posting, voting, following) go through Hive blockchain
- Content is stored on Hive, metadata includes tags, images, and app info
- Always handle blockchain operation errors gracefully

### 3. Component Patterns
- Use Chakra UI components with theme-aware styling
- Responsive design with `base`, `md`, `lg` breakpoints
- Consistent spacing using Chakra's spacing system
- Loading states for all async operations

### 4. Content Handling
- Support for Markdown content with image embeds
- Hashtag extraction from post content
- Image uploads via Hive image hosting
- GIF integration through Giphy API
- Content validation before posting

## Key Environment Variables
```bash
NEXT_PUBLIC_THEME="hacker" # Theme selection
NEXT_PUBLIC_HIVE_COMMUNITY_TAG # Community identifier
NEXT_PUBLIC_COMMUNITY_NAME # Display name
NEXT_PUBLIC_HIVE_USER # Hive username for operations
GIPHY_API_KEY # For GIF integration
```

## Development Guidelines

### Package Management:
- **ALWAYS use pnpm** for package operations:
  - Install: `pnpm install <package>`
  - Uninstall: `pnpm uninstall <package>`
  - Run scripts: `pnpm dev`, `pnpm build`, etc.
  - Add dev dependencies: `pnpm add -D <package>`

### When creating new components:
1. Use functional components with TypeScript
2. Follow Chakra UI patterns for styling
3. Make components theme-aware using semantic colors
4. Include proper error handling for blockchain operations
5. Add loading states for async operations
6. Use proper TypeScript types (see `/types/` directory)

### For blockchain operations:
1. Always use the `useAioha()` hook
2. Handle success/error states properly
3. Provide user feedback for operations
4. Use proper Hive content formatting
5. Include metadata with posts (tags, images, app info)

### For styling:
1. Use Chakra UI components as primary building blocks
2. Use semantic color tokens from themes
3. Follow responsive design patterns
4. Use consistent spacing and sizing
5. Leverage Chakra's variant system

### For state management:
1. Use React hooks for local state
2. Use Context for global state (user, theme)
3. Custom hooks for reusable logic (see `/hooks/`)
4. Proper cleanup in useEffect hooks

## API Integration Patterns

### Hive Client Usage
```typescript
// Import from client functions
import { vote, commentWithKeychain, getPost } from '@/lib/hive/client-functions'

// Use with proper error handling
const handleVote = async () => {
  try {
    const result = await vote({ username, author, permlink, weight })
    if (result.success) {
      // Handle success
    }
  } catch (error) {
    // Handle error
  }
}
```

### Content Operations
- Posts are called "comments" in Hive terminology
- Use permlink generation: `new Date().toISOString().replace(/[^a-zA-Z0-9]/g, "").toLowerCase()`
- Include proper metadata: `{ app: 'mycommunity', tags: [], images: [] }`
- Handle hashtag extraction and tagging

## UI/UX Patterns

### Common Components
- `TweetComposer` - For creating new posts/comments
- `PostCard` - For displaying posts in grid/list view
- `TweetList` - For feed display with infinite scroll
- `ProfilePage` - User profile display
- `NotificationItem` - For notification display

### Navigation
- Header with community branding and login
- Sidebar with navigation and user info
- Footer navigation for mobile
- Modal system for overlays

### Responsive Design
- Mobile-first approach
- Collapsible sidebar on mobile
- Touch-friendly interactions
- Proper image sizing and optimization

## Testing & Error Handling

### Error Handling Patterns
1. Try-catch blocks for all async operations
2. User-friendly error messages
3. Fallback UI states
4. Network error recovery
5. Blockchain operation retries

### Loading States
1. Skeleton loading for content
2. Spinner for operations
3. Progress bars for uploads
4. Disabled states during operations

## Security Considerations
1. Input validation for all user content
2. XSS prevention in markdown rendering
3. Image URL validation
4. Proper authentication checks
5. Rate limiting awareness

## Performance Optimization
1. Lazy loading for images
2. Virtual scrolling for long lists
3. Memoization for expensive calculations
4. Code splitting for routes
5. Optimized bundle size

## Content Guidelines
- All content stored on Hive blockchain
- Support for markdown formatting
- Image hosting through Hive image service
- Hashtag support for categorization
- Community tagging system
- Voting and reputation system integration

## Common Debugging Tips
1. Check browser console for Hive client errors
2. Verify authentication state with Aioha
3. Check environment variables
4. Validate theme configuration
5. Monitor network requests to Hive nodes

Remember: This is a decentralized social media platform where content permanence and user ownership are key principles. Always consider the blockchain implications of any changes you make.